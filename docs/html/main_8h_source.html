<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PWM Controlled Motor: main.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PWM Controlled Motor
   </div>
   <div id="projectbrief">issa motor controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">main.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="main_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef MAIN_H</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define MAIN_H</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;stm32l1xx.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga96c0bde98447931ca3e0b0c55f42a1ac">   30</a></span>&#160;<span class="preprocessor">#define PB3_0_OUTPUT (0x000000FF) </span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga3973728a9e4a40b58ed1fa3c68220146">   31</a></span>&#160;<span class="preprocessor">#define PB7_4_OUTPUT (0x0000FF00) </span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga0db9fe8a278e6ab7c5c6f14fe58e5eb1">   32</a></span>&#160;<span class="preprocessor">#define GPIO_OUTPUT (0x55555555)  </span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga7be6a0cc9aa65da1d4ee5751b4085853">   33</a></span>&#160;<span class="preprocessor">#define GPIO_INPUT (0x00000000)   </span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#gae689bc8f5c42d6df7bd54a8dd372e072">   34</a></span>&#160;<span class="preprocessor">#define GPIO_PULLUP (0x55555555)  </span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga75d958d0410c36da7f27d1f4f5c36c14">   35</a></span>&#160;<span class="preprocessor">#define GPIO_PULLDOWN (0xAAAAAAAA)</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#define BIT0 (0x0001)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#define BIT1 (0x0002)</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#define BIT2 (0x0004)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#define BIT3 (0x0008)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga7bdcd95373cc0af918fe6385c7ccd80f">   40</a></span>&#160;<span class="preprocessor">#define CK_INT (0x00200000)       </span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga4569b310ad4177e935f20becec046af2">   41</a></span>&#160;<span class="preprocessor">#define PIN_LOW (0x00)            </span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#gae14869a27ae7d64d5790cdb2b866f737">   42</a></span>&#160;<span class="preprocessor">#define PIN_HIGH (0xFF)           </span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga57eb86a3fd3a0127ae8949b2e779efe7">   43</a></span>&#160;<span class="preprocessor">#define PIN_PW (0x0F)             </span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga05478082559d42ff2b1e181066f5da77">   44</a></span>&#160;<span class="preprocessor">#define AF3 (0x33333333);         </span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">/* @} */</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">static</span> uint16_t buttonPressed; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#gaa2fb076c8680563fd1828458296d92ed">   48</a></span>&#160;uint16_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#gaa2fb076c8680563fd1828458296d92ed">LEDS</a>; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga7a037e150bf6662a3330abfe5c73f93e">   49</a></span>&#160;uint16_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga7a037e150bf6662a3330abfe5c73f93e">colums</a>; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga58897720d39a73af3d7686c4e8303758">   50</a></span>&#160;uint16_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga58897720d39a73af3d7686c4e8303758">rows</a>; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;uint16_t output;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga06132b943c080c29518a242b922422c1">   52</a></span>&#160;uint32_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga06132b943c080c29518a242b922422c1">pulseWidthLookup</a>[9] = {0}; </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#gaefb5a28c8a881739714e79dfb5268b1d">   53</a></span>&#160;uint32_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#gaefb5a28c8a881739714e79dfb5268b1d">period_cc</a>; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="group___p_i_n___m_a_s_k_s.html#ga7562ac84c71efa440b1733fc59d2f4bf">   54</a></span>&#160;uint32_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga7562ac84c71efa440b1733fc59d2f4bf">pulsewidth_base</a>; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;uint8_t i;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga924fbe483fd8c13808cad6ab252d4cb0">pinSetup</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#gac23aade7698fc67da7545ebc2b01611d">setupKeypadPins</a>(uint32_t);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga316076f90e030789728fd2d48b518bd7">enableInterrupts</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;uint16_t <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga273dd31c2cfce94a1a9c02e1ec7efc54">desipherButton</a>(uint16_t);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga341d33c536d663703208ab568f7d1e0e">delay</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#gafe1bedbfa62e42fe87743c252cee1964">updateLEDs</a>(uint16_t);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga49cfdd46eb8d0ef3e1987514aa9343dc">EXTI1_IRQHandler</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga205d50bff2c61d314d5fa87687d0a52a">TIM10_PWM_setup</a>(uint32_t);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga66fcc2b657371f55e0e953874b1866ae">TIM10_pinSetup</a>(uint8_t);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___p_i_n___m_a_s_k_s.html#ga385c98620d04d879447b17442364cda2">PWM10_update</a>(uint8_t);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga06132b943c080c29518a242b922422c1"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga06132b943c080c29518a242b922422c1">pulseWidthLookup</a></div><div class="ttdeci">uint32_t pulseWidthLookup[9]</div><div class="ttdoc">Lookup table to calculate the exact CCP register value needed to set PWM dutycycle 0 - 100%.</div><div class="ttdef"><b>Definition:</b> main.h:52</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga205d50bff2c61d314d5fa87687d0a52a"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga205d50bff2c61d314d5fa87687d0a52a">TIM10_PWM_setup</a></div><div class="ttdeci">void TIM10_PWM_setup(uint32_t)</div><div class="ttdef"><b>Definition:</b> main.c:208</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga273dd31c2cfce94a1a9c02e1ec7efc54"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga273dd31c2cfce94a1a9c02e1ec7efc54">desipherButton</a></div><div class="ttdeci">uint16_t desipherButton(uint16_t)</div><div class="ttdef"><b>Definition:</b> main.c:163</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga316076f90e030789728fd2d48b518bd7"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga316076f90e030789728fd2d48b518bd7">enableInterrupts</a></div><div class="ttdeci">void enableInterrupts(void)</div><div class="ttdef"><b>Definition:</b> main.c:101</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga341d33c536d663703208ab568f7d1e0e"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga341d33c536d663703208ab568f7d1e0e">delay</a></div><div class="ttdeci">void delay(void)</div><div class="ttdef"><b>Definition:</b> main.c:293</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga385c98620d04d879447b17442364cda2"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga385c98620d04d879447b17442364cda2">PWM10_update</a></div><div class="ttdeci">void PWM10_update(uint8_t)</div><div class="ttdef"><b>Definition:</b> main.c:270</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga49cfdd46eb8d0ef3e1987514aa9343dc"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga49cfdd46eb8d0ef3e1987514aa9343dc">EXTI1_IRQHandler</a></div><div class="ttdeci">void EXTI1_IRQHandler(void)</div><div class="ttdef"><b>Definition:</b> main.c:310</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga58897720d39a73af3d7686c4e8303758"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga58897720d39a73af3d7686c4e8303758">rows</a></div><div class="ttdeci">uint16_t rows</div><div class="ttdoc">Variable to store the state of the rows when the keypad is pressed.</div><div class="ttdef"><b>Definition:</b> main.h:50</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga66fcc2b657371f55e0e953874b1866ae"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga66fcc2b657371f55e0e953874b1866ae">TIM10_pinSetup</a></div><div class="ttdeci">void TIM10_pinSetup(uint8_t)</div><div class="ttdef"><b>Definition:</b> main.c:244</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga7562ac84c71efa440b1733fc59d2f4bf"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga7562ac84c71efa440b1733fc59d2f4bf">pulsewidth_base</a></div><div class="ttdeci">uint32_t pulsewidth_base</div><div class="ttdoc">Base number used to calculate pulseWidthLookup[] table.</div><div class="ttdef"><b>Definition:</b> main.h:54</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga7a037e150bf6662a3330abfe5c73f93e"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga7a037e150bf6662a3330abfe5c73f93e">colums</a></div><div class="ttdeci">uint16_t colums</div><div class="ttdoc">Variable to store the state of the columns when the keypad is pressed.</div><div class="ttdef"><b>Definition:</b> main.h:49</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_ga924fbe483fd8c13808cad6ab252d4cb0"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#ga924fbe483fd8c13808cad6ab252d4cb0">pinSetup</a></div><div class="ttdeci">void pinSetup(void)</div><div class="ttdef"><b>Definition:</b> main.c:53</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_gaa2fb076c8680563fd1828458296d92ed"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#gaa2fb076c8680563fd1828458296d92ed">LEDS</a></div><div class="ttdeci">uint16_t LEDS</div><div class="ttdoc">Variable to show the needed state to display number 0 - 10 in binary (ex: 2 -&gt; 0010)</div><div class="ttdef"><b>Definition:</b> main.h:48</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_gac23aade7698fc67da7545ebc2b01611d"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#gac23aade7698fc67da7545ebc2b01611d">setupKeypadPins</a></div><div class="ttdeci">void setupKeypadPins(uint32_t)</div><div class="ttdef"><b>Definition:</b> main.c:125</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_gaefb5a28c8a881739714e79dfb5268b1d"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#gaefb5a28c8a881739714e79dfb5268b1d">period_cc</a></div><div class="ttdeci">uint32_t period_cc</div><div class="ttdoc">Value needed to set the PWM period requested.</div><div class="ttdef"><b>Definition:</b> main.h:53</div></div>
<div class="ttc" id="agroup___p_i_n___m_a_s_k_s_html_gafe1bedbfa62e42fe87743c252cee1964"><div class="ttname"><a href="group___p_i_n___m_a_s_k_s.html#gafe1bedbfa62e42fe87743c252cee1964">updateLEDs</a></div><div class="ttdeci">void updateLEDs(uint16_t)</div><div class="ttdef"><b>Definition:</b> main.c:144</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
